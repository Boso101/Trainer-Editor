<!DOCTYPE html>
<html>
	<head>
		<title>HTE | Trainer Format</title>
		
		<style type="text/css">
	
		body {
			background-color: pink;
		}

		</style>
	</head>

	<body>
		<h1>Hopeless Trainer Editor</h1>
		<h2>Trainer Format for the GBA Pokémon Games</h2>
		<h3>Introduction</h3>
		<p>
		Greetings, fellow Pokémon hackers! This document details the various parts of the format of the Trainer data as found on the GBA Pokémon games.<br>
		It was created in order to make the information behind this tool more accessible to other people.<br><br>
		By the way, everything you see here I, Lost Heart/Hopeless Masquerade/itari, had to figure out on my own!<br>
		So try be a little appreciative if you ever put it to use. ;)
		</p>
		<h3>Trainer Data</h3>
		<p>
		Inside the ROM, there exists a table of information. This table, which will be detailed below, contains information on every single trainer in the game.<br>
		This is the data that the editor primarily works with, and contains information such as trainer name, class, sprite, etc.<br>
		Note: Any place with "..." in the table means it is either filler data or I have yet to figure it out.<br>
		<table>
			<tr>
				<th>Offset</th>
				<th>Length (bytes)</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>0x0</td>
				<td>1</td>
				<td>Flags*</td>
			</tr>
			<tr>
				<td>0x1</td>
				<td>1</td>
				<td>Trainer Class</td>
			</tr>
			<tr>
				<td>0x2</td>
				<td>1</td>
				<td>Gender + Intro. Music*</td>
			</tr>
			<tr>
				<td>0x3</td>
				<td>1</td>
				<td>Sprite ID</td>
			</tr>
			<tr>
				<td>0x4</td>
				<td>12</td>
				<td>Name*</td>
			</tr>
			<tr>
				<td>0x10</td>
				<td>2</td>
				<td>Held Item 1</td>
			</tr>
			<tr>
				<td>0x12</td>
				<td>2</td>
				<td>Held Item 2</td>
			</tr>
			<tr>
				<td>0x14</td>
				<td>2</td>
				<td>Held Item 3</td>
			</tr>
			<tr>
				<td>0x16</td>
				<td>2</td>
				<td>Held Item 4</td>
			</tr>
			<tr>
				<td>0x18</td>
				<td>1</td>
				<td>Double Battle Flag (00 = false, 01 = true)</td>
			</tr>
			<tr>
				<td>...</td>
			</tr>
			<tr>
				<td>0x1C</td>
				<td>1</td>
				<td>AI (Unknown)</td>
			</tr>
			<tr>
				<td>...</td>
			</tr>
			<tr>
				<td>0x20</td>
				<td>1</td>
				<td>Number of Pokémon in Party</td>
			</tr>
			<tr>
				<td>...</td>
			</tr>
			<tr>
				<td>0x24</td>
				<td>4</td>
				<td>Pointer to Pokémon Data</td>
			</tr>
		</table>
		*&nbsp;These sections receive special explanations below.
		</p>
		<h4>Flags</h4>
		<p>
		There are two flags, or boolean values, set in this single byte, each of them taking a single bit to store.
		The first bit tells the game whether or not the trainer has custom attacks for each Pokémon, while the second tells the game whether or not each Pokémon has a custom held item.
		<br>
		To get the value of the first flag, simply do this:<br>
		<span style="font-family: 'Courier New';">flags & 1</span>
		<br>
		While to get the value of the second flag, simply do this:<br>
		<span style="font-family: 'Courier New';">(flags >> 1) & 1</span>
		<br>
		</p>
		<h4>Gender + Intro. Music</h4>
		<p>
		That's right. The information for both the trainer's gender and the music played during a trainer's introduction is stored in this single byte. To be more specific, the first seven bits of the data are reserved for the music (meaning up 127 different songs), while the eight is for the gender.<br><br>
		The bit for gender is quite simple: if it is 0, male; if it is 1, female.
		<br><br>
		To get the value for the music, simply do this:<br>
		<span style="font-family: 'Courier New';">gender_music_val & 127</span>
		<br>
		And to get the value for the gender, simple do this:<br>
		<span style="font-family: 'Courier New';">(gender_music_val & 128) >> 7</span>
		</p>
		
		<h3>Pokémon Data</h3>
		<p>
		Now, this is the second most important piece of the trainer's information. The Pokémon data is a small table containing the basic information for all the Pokémon in the trainer's party.<br>
		Note: The format is quite annoying, so please reference the tables below:<br>
		
		<br><i>Generic Pokémon</i>
		<table>
			<tr>
				<th>Offset</th>
				<th>Length (bytes)</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>0x0</td>
				<td>1</td>
				<td>IVs</td>
			</tr>
			<tr>
				<td>0x2</td>
				<td>1</td>
				<td>Level</td>
			</tr>
			<tr>
				<td>0x4</td>
				<td>2</td>
				<td>Species</td>
			</tr>
			<tr>
				<td>0x6</td>
				<td>2</td>
				<td>Filler (00 00)</td>
			</tr>
		</table>
		
		<br><i>Pokémon Have Custom Items</i>
		<table>
			<tr>
				<th>Offset</th>
				<th>Length (bytes)</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>0x0</td>
				<td>1</td>
				<td>IVs</td>
			</tr>
			<tr>
				<td>0x2</td>
				<td>1</td>
				<td>Level</td>
			</tr>
			<tr>
				<td>0x4</td>
				<td>2</td>
				<td>Species</td>
			</tr>
			<tr>
				<td>0x6</td>
				<td>2</td>
				<td>Held Item</td>
			</tr>
		</table>
		
		<br><i>Pokémon Have Custom Attacks</i>
		<table>
			<tr>
				<th>Offset</th>
				<th>Length (bytes)</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>0x0</td>
				<td>1</td>
				<td>IVs</td>
			</tr>
			<tr>
				<td>0x2</td>
				<td>1</td>
				<td>Level</td>
			</tr>
			<tr>
				<td>0x4</td>
				<td>2</td>
				<td>Species</td>
			</tr>
			<tr>
				<td>0x6</td>
				<td>2</td>
				<td>Attack 1</td>
			</tr>
			<tr>
				<td>0x8</td>
				<td>2</td>
				<td>Attack 2</td>
			</tr>
			<tr>
				<td>0xA</td>
				<td>2</td>
				<td>Attack 3</td>
			</tr>
			<tr>
				<td>0xC</td>
				<td>2</td>
				<td>Attack 4</td>
			</tr>
			<tr>
				<td>0xE</td>
				<td>2</td>
				<td>Filler (00 00)</td>
			</tr>
		</table>
		
		<br><i>Pokémon Have Custom Items & Attacks</i>
		<table>
			<tr>
				<th>Offset</th>
				<th>Length (bytes)</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>0x0</td>
				<td>1</td>
				<td>IVs</td>
			</tr>
			<tr>
				<td>0x2</td>
				<td>1</td>
				<td>Level</td>
			</tr>
			<tr>
				<td>0x4</td>
				<td>2</td>
				<td>Species</td>
			</tr>
			<tr>
				<td>0x6</td>
				<td>2</td>
				<td>Held Item</td>
			</tr>
			<tr>
				<td>0x8</td>
				<td>2</td>
				<td>Attack 1</td>
			</tr>
			<tr>
				<td>0xA</td>
				<td>2</td>
				<td>Attack 2</td>
			</tr>
			<tr>
				<td>0xC</td>
				<td>2</td>
				<td>Attack 3</td>
			</tr>
			<tr>
				<td>0xE</td>
				<td>2</td>
				<td>Attack 4</td>
			</tr>
		</table>
		
		<br>
		Depending on the flags, the above format will repeat for each Pokémon in the party.
		</p>
	</body>
</html>